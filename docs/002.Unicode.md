# 第二回 Unicode-Math视角

<!-- TOC -->

- [1. Core](#1-core)
- [2. Unicode Concepts](#2-unicode-concepts)
  - [2.1. Code Point](#21-code-point)
  - [2.2. Code Block](#22-code-block)
  - [2.3. Code Plane](#23-code-plane)
  - [2.4. Unicode Code Space](#24-unicode-code-space)
- [3. Unicode Encoding](#3-unicode-encoding)
- [4. 总结](#4-%E6%80%BB%E7%BB%93)

<!-- /TOC -->

## 1. Core

**Character Set**是属于“文化”的范畴，**Coded Character Set**是属于“数学”的范畴，**Character Encoding**是属于“计算机”的范畴。

Unicode是属于一种**Coded Character Set**，因此它最本质的概念就是建立Character与Code Point之间的映射。

> 作者有话说：Code Point（点）-->Code Block（块）-->Code Plane（面）-->Code Space（空间），概念在不断的变大

## 2. Unicode Concepts

讲解思路：一群人相当于Code Point，这群人住在大楼里，这些大楼相当于Code Block，由这许多的大楼组成了一个区，相当于Plane，再由这些区组成了一个城市，相当于Unicode。

### 2.1. Code Point

In character encoding terminology, a **code point** or **code position** is any of the numerical values that make up the code space.

举一些例子

| Character | Code Point | Unicode Name              |
| --------- | ---------- | ------------------------- |
| `A`       | `0x41`     | LATIN CAPITAL LETTER A    |
| `a`       | `0x61`     | LATIN SMALL LETTER A      |
| ` `       | `0xFEFF`   | ZERO WIDTH NO-BREAK SPACE |
| `�`       | `0xFFFD`   | REPLACEMENT CHARACTER     |



### 2.2. Code Block

- [Unicode block](https://en.wikipedia.org/wiki/Unicode_block)

In Unicode, a **block** is defined as **one contiguous range** of **code points**. Blocks are named uniquely and have no overlap. They have a starting code point of the form `hhh0` and an ending code point of the form `hhhF`.

举一些例子：

| Block Range     | Block Name                  | Code Points | Assigned Characters | Memo             |
| --------------- | --------------------------- | ----------- | ------------------- | ---------------- |
| `0x0000~0x007F` | Basic Latin                 | `128`       | `128`               |                  |
| `0x4E00~0x9FFF` | CJK Unified Ideographs      | `20992`     | `20976`             | 是常用的中文字符    |
| `0xD800~0xDB7F` | High Surrogates             | `896`       | `0`                 |                  |
| `0xDB80~0xDBFF` | High Private Use Surrogates | `128`       | `0`                 |                  |
| `0xDC00~0xDFFF` | Low Surrogates              | `1024`      | `0`                 |                  |

There are 1024 "high" surrogates (`D800`～`DBFF`) and 1024 "low" surrogates (`DC00`～`DFFF`). By combining a pair of surrogates, the remaining characters in all the other planes can be addressed (`1024 × 1024 = 1048576` code points in the other 16 planes).

> 1024 × 1024 = 1048576  
> 256 × 4 × 256 × 4 = 65536 × 16 = 1048576  
> 896:128 = (896/64):(128/64) = 14:2

Since **high surrogate values** in the range `DB80`~`DBFF` always produce values in the **Private Use planes**, the high surrogate range can be further divided into (normal) **high surrogates** (`D800`~`DB7F`) and "**high private use surrogates**" (`DB80`~`DBFF`).

### 2.3. Code Plane

In the Unicode standard, a **plane** is a continuous group of 65,536 (2<sup>16</sup>) code points. There are 17 planes, identified by the numbers 0 to 16. **Plane 0** is the **Basic Multilingual Plane (BMP)**, which contains most commonly-used characters. The higher planes 1 through 16 are called "**supplementary planes**". The very last code point in Unicode is the last code point in plane 16, U+10FFFF. As of Unicode version 12.0, six of the planes have assigned code points (characters), and four are named.

The **Unicode codespace** is divided into seventeen **planes**, numbered `0` to `16`:

| Plane         | Range          | Name                                   | Abbr     |
| ------------- | -------------- | -------------------------------------- | -------- |
| `Plane 0`     | `0000-FFFF`    | Basic Multilingual Plane               | BMP      |
| `Plane 1`     | `10000-1FFFF`  | Supplementary Multilingual Plane       | SMP      |
| `Plane 2`     | `20000-2FFFF`  | Supplementary Ideographic Plane        | SIP      |
| `Plane 3`     | `30000-3FFFF`  | Tertiary Ideographic Plane             | TIP      |
| `Plane 4-13`  | `40000-DFFFF`  | unassigned                             | -        |
| `Plane 14`    | `E0000-EFFFF`  | Supplement­ary Special-purpose Plane   | SSP      |
| `Plane 15-16` | `F0000-10FFFF` | Supplement­ary Private Use Area planes | SPUA-A/B |

![Unicode planes, and code point ranges used](images/unicode_planes.png)

### 2.4. Unicode Code Space

> **code space** (or **codespace**), the range of code points.

Unicode defines a codespace of `1,114,112` code points in the range `0x0000` to `0x10FFFF`.

> 0x10FFFF = 1114111

## 3. Unicode Encoding

**Unicode** can be implemented by different **character encodings**. The **Unicode standard** defines `UTF-8`, `UTF-16`, and `UTF-32`, and several other encodings are in use. The most commonly used encodings are `UTF-8` and `UTF-16`.

The standard Unicode encoding is called UTF-32BE (Unicode Transformation Format - 32-bit Big Endian), which maps every Unicode character to a sequence of 4 bytes. For any given Unicode character, the UTF-32BE encoded byte sequence can be obtained by putting the character's code point integer number in the 4-byte binary format with the most significant byte listed first.

There are also other **character encodings** used on the **Unicode character set**, as described in previous chapters:

- UTF-32BE - The standard Unicode character encoding as mentioned above.
- UTF-32LE - Same as UTF-32BE, except that the least significant byte is listed first.
- UTF-16BE - Every Unicode character is mapped to a sequence of 2 or 4 bytes with the most significant byte listed first.
- UTF-16LE - Same as UTF-16BE, except that the least significant byte is listed first.
- UTF-8 - Every Unicode character is mapped to a sequence of 1, 2, 3 or 4 byte.

## 4. 总结

参考：

- [Unicode](https://en.wikipedia.org/wiki/Unicode)
- [Plane (Unicode)](https://en.wikipedia.org/wiki/Plane_(Unicode))
- [Unicode block](https://en.wikipedia.org/wiki/Unicode_block)
- [Code point](https://en.wikipedia.org/wiki/Code_point)
- [CJK Unified Ideographs (Unicode block)](https://en.wikipedia.org/wiki/CJK_Unified_Ideographs_(Unicode_block))
